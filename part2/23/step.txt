23. Проектирование отношения между классами через наследование и композицию
При создании иерархии классов методологически верно начинать с того, что делать не следует, чтобы отбросить большое количество потенциально негодных элементов. Тогда понимание, как делать хорошо, появится естественным образом.

Наследование -- это отношение "является" (is-a), когда один класс является потомком другого класса.

В русском языке глагол "является" очень часто используется именно в том смысле, как это происходит сейчас. Однако уже на первом курсе Литературного института учат, что "является лишь тень отца Гамлета", в остальных случаях надо либо менять форму предложения, либо использовать слова "есть" или "суть". Например, не "велосипедист является спортсменом", а "велосипедист есть спортсмен" или "велосипедист -- это спортсмен". Однако в технической литературе "является" в данном контексте стало к сожалению стандартным.

Композиция -- это клиентское отношение "содержит" (has-a), когда один объект содержит объект другого класса (класс включает поле другого типа/класса).

Правило отказа от наследования: не надо делать класс B наследником класса A, если не найдены хорошие аргументы в защиту такого отношения наследования.

Это правило само по себе слабое, потому что надо как-то оценивать "хорошесть" аргументов в защиту наследования, но как это делать? На практике эти аргументы учитывают конкретный контекст, основываются на опыте разработчика, на качестве технического задания, на адекватной информации от заказчика, и т. д. Полезно также попытаться найти контраргументы, опровергающие возможность потенциального наследования.

Нередко возникают проблемы в выборе отношения "является" или "содержит", когда между классами явно имеется связь, только непонятно, как её формализовать. Сложность тут в том, что "содержит" очень редко означает также и "является", но "является" довольно часто означает и "содержит".

Каждая программа является кодом.
Каждая программа содержит код.

Каждый гоночный автомобиль содержит двигатель.
но не
Каждый гоночный автомобиль является двигателем.
Чаще всего на практике подходит отношение композиции "содержит", и как правило когда о некотором отношении можно сказать "является", то часто из этого "является" можно вывести и "содержит", это лишь два разных взгляда на одно и то же. И только если совсем явно не удаётся вывести отношение "содержит", следует использовать "является". Это универсальный принцип, дополним его более формальными правилами.

далее